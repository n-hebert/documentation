---
id: health-checks
title: Health Checks
sidebar_label: Health Checks
description: This Health Checks page describes health checks in Pomerium Zero.
---

# Pomerium Zero Health Checks

Health Checks communicate the status of a cluster. To view your cluster's status, go to the [Status](https://console.pomerium.app/app/reports/status) page of the Zero Console. If you see a health check alert in the Status page, it means something is wrong with your cluster and you should take steps to resolve it.

Refer to the relevant health check below to learn how to fix it.

## Certificates are expired or invalid {#certificates-current}

This health check inspects a cluster's certificates to see if they expire within 10 days. It runs daily, and every time the cluster configuration is updated.

**What causes this warning**:
    - If you're cluster uses managed certificates provisioned by Pomerium, then this error is a bug. Please [contact support](https://discuss.pomerium.com/).
    - If you manually uploaded your own custom certificate, then you must upload a new certificate.

**Steps to resolve**: Upload a valid certificate, or allow Pomerium to automate certificate management for you by adding a [Custom Domain](/docs/capabilities/custom-domains).

## Hostnames do not have matching certificates {#certificates-match-hostnames}

This health check ensures that all the hostnames available in a cluster's configuration have matching certificates. It runs every time the cluster configuration is updated.

**What causes this error**: Either the [From URL](/docs/reference/routes/from) in a route block is incorrect, or the certificate is missing.

**Steps to resolve**: Make sure all [From URLs](/docs/reference/routes/from) are correct, and that the hostnames have matching certificates.

:::info

For more information on certificates in Pomerium, see the following pages:

- [**Certificates**](/docs/concepts/certificates)
- [**Certificates reference**](/docs/reference/certificates)

:::

## Cluster configuration is not current {#cluster-config-current}

This health check makes sure the cluster is running the latest changeset. It runs daily to check for the latest configuration, or every time the cluster configuration is updated.

**What causes this error**: This health check may indicate cluster connectivity issues. Specifically, Pomerium Zero can't connect to the cluster to apply the latest changeset to its configuration.

**Steps to resolve**: Please restart the cluster. If that doesn't resolve the issue, please [contact support](https://discuss.pomerium.com/).

##  Cluster version is not current {#cluster-version-current}

This health makes sure the cluster replica is running the latest release. It runs daily.

**What causes this error**: The replica is not running the latest version of Pomerium Zero.

**Steps to resolve**: Update your Pomerium Zero cluster configuration to run the latest version of Pomerium. See the [Pomerium Zero Upgrading] page to see steps for your deployment environment.

## Cluster using an in-memory storage backend {#persistent-backend}

This health check throws an error if it detects a cluster isn't connected to a persistent storage backend. It runs every time the cluster  configuration is updated.

**What causes this error**:

By default, a cluster uses an in-memory storage backend to synchronize replicas. This does not persist your configuration. For production environments, we recommend connecting each cluster instance to its own dedicated PostgreSQL database.

**Steps to resolve**: See the [**Databroker Storage Connection String**](/docs/reference/databroker#databroker-storage-connection-string) reference page to learn how to connect to a database instance in Pomerium.

## Incompatible configuration {#config-databroker-build}

This health check looks for configuration incompatabilities in a replica. It runs every time the cluster configuration is updated.

**What causes this error**: This is caused by a version incompatability in the cluster configuration. For example, you somehow apply a configuration change that isn't compatible with your version of Pomerium Zero.

**Steps to resolve**: If you see this warning, please [contact support](https://discuss.pomerium.com/).

## Cluster can't communicate with the storage backend {#storage-backend}

This health check monitors the connection to a PostgreSQL database. It runs every time the cluster configuration is updated.

**What causes this error**: Pomerium can't detect the connection to your PostgreSQL database.

**Steps to resolve**: Check the parameters of your [**Databroker Storage Connection String**](/docs/reference/databroker#databroker-storage-connection-string).

## There's an issue with cluster configuration {#xds-cluster}

This health check tells you if Envoy accepted the cluster configuration or not after a configuration update.

**What causes this error**: If you see this warning, please [contact support](https://discuss.pomerium.com/).

## There's an issue with the network listener {#xds-listener}

This health check makes sure the network listener is configured correctly. It runs every time the cluster configuration is updated.

**What causes this error**: Typically, this error is caused when Pomerium's network listener can't bind to the cluster's port.

**Steps to resolve**: If this is a port binding error, you may need to kill a process running on that port or specify a port to bind to.

## There's an issue with the route configuration {#xds-route-configuration}

This health check verifies the route configuration. It runs every time the cluster configuration is updated.

**What causes this error**: A route misconfiguration in a cluster.

**Steps to resolve**: If you see this warning, it's likely a problem with Pomerium. Please [contact support](https://discuss.pomerium.com/).

## There's an issue with the configuration {#xds-other}

This health check monitors [xDS](https://www.envoyproxy.io/docs/envoy/latest/api-docs/xds_protocol) issues in a replica. It runs every time the cluster configuration is updated.

**What causes this error**: If you see this warning, it's likely a problem with Pomerium. Please [contact support](https://discuss.pomerium.com/).

## Pomerium can't write some of its cache files {#zero-bootstrap-config-save}

This health check makes sure Pomerium can persist a replica's bootstrap configuration. It runs when you start a cluster, or every time the cluster configuration is updated.

**What causes this error**: Pomerium doesn't have sufficient permissions to read from a replica's configuration file.

**Steps to resolve**: Check your file permissions to make sure Pomerium has read access.

## Cluster connectivity issues with the cloud {#zero-connect}

This health check monitors the connection between the Pomerium Zero cloud and a cluster. It maintains a consistent streaming connection.

**What causes this error**: Connectivity issues between Pomerium Zero and a cluster.

**Steps to resolve**: You may experience this issue if you're accessing Pomerium Zero behind a firewall. Check your firewall settings to make sure it allows HTTP and HTTPS traffic.
